<!DOCTYPE html>
<html lang="fr">
	<head>
	  <meta charset="utf-8">
		<title>Liste des Emprunts entre amis</title>
		<meta descr="Suivez vos emprunts entre amis.">
		<script type="text/javascript" src="/nav.js"></script>
		<script type="text/javascript" src="/world.js"></script>
		<script type="text/javascript" src="/dom.js"></script>
		<script type="text/javascript" src="/init.js"></script>
		<!-- bootstrap -->
		<link href="/bootstrap.min.css" rel="stylesheet" media="screen">
		<!-- responsve -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="/bootstrap-responsive.css" rel="stylesheet">
		<!-- pikaday -->
		<link rel="stylesheet" href="/pikaday.css">
	</head>
	<body>
		<nav class="navbar navbar-default">
			<div class="container-fluid">

				<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
      			</a>

				<div class="navbar-header">
					<ul class="nav navbar-nav">
						<li><a class="navbar-brand" href="/">Petits Emprunts</a></li>
       					<li id="iBorrowLi" class=""><a href="#" id="IBorrowButton">J'emprunte</a></li>
       					<li id="iLoanLi" class=""><a href="#" id="ILoanButton">Je prête</a></li>
       				</ul>
       			</div>
       			<div class="navbar-right pull-right">
       				<div class="nav-collapse collapse">
	  					<ul class="nav navbar-nav navbar-right">
	  						<li><a href="/" id="profile">mon profil</a></li>
	        				<li><a href="/disconnect">Déconnexion</a></li>
        				</ul>
        			</div>
				</div>
			</div>
		</nav>
		<div class="container">
			<div class="row-fluid" id="mainForm">
				<div class="span4 offset3">
				<span id="helloUserMain">Bonjour User,</span>
				<span id="whatYouDoMain">what you do : </span>
					<form>
			  			<fieldset>
			  			<label>Quoi ?</label>
			  			<input type="text" placeholder="Quoi ?" id="fieldWhat">
			  			<div class="alert alert-danger" id="dangerWhat" hidden="true"></div>
			  			<label>A Qui ?</label>
			  			<input type="text" placeholder="A Qui ?" id="fieldWho">
			  			<div class="alert alert-danger" id="dangerWho" hidden="true"></div>
			  			<label>Quand ?</label>
			  			<input type="text" placeholder="Quand ?" id="fieldWhen">
			  			<div class="alert alert-danger" id="dangerWhen" hidden="true"></div>
			  			<button type="button" id="submitNewLoanButton" class="btn btn-primary btn-large btn-block">Nouvel Emprunt</button>
			  			</fieldset>
			  		</form>
			  	</div>
			 </div>

			<div class="row-fluid" id="activity">
				<div class="span3">
					<h3 class="text-left">Mes amis</h3>
					<ul id="friends">
						<!-- dynamical -->
					</ul>
				</div>
				<div class="span9">
					<h3 class="text-left">Mes Emprunts</h3>
					<table id="lendingsIBorrow" class="table table-striped">
						<tbody id="lendingsIBorrowBody">
						<!-- dynamical -->
						</tbody>
					</table>
					<h3 class="text-left">Mes Prêts</h3>
					<table id="lendingsILoan" class="table table-striped">
						<tbody id="lendingsILoanBody">
						<!-- dynamical -->
						</tbody>
					</table>
				</div>
			</div>
			
		</div>

		<!-- bootstrap -->
		<script src="http://code.jquery.com/jquery.js"></script>
		<script src="/bootstrap.min.js"></script>
		<!-- pickaday -->
		<script src="/moment.js"></script>
		<script src="/pikaday.js"></script>
		<script>
			moment.locale("fr")
    		//var picker = new Pikaday({ field: document.getElementById('fieldWhen') });
    		 var picker = new Pikaday({
		        field: document.getElementById('fieldWhen'),
		        format: 'D MMM YYYY',
		        i18n: {
				    previousMonth : 'Mois précédent',
				    nextMonth     : 'Mois suivant',
				    months        : ['Janvier','Février','Mars','Avril','Mai','Juin','Juillet','Août','Septembre','Octobre','Novembre','Décembre'],
				    weekdays      : ['Dimanche','Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi'],
				    weekdaysShort : ['Dim','Lun','Mar','Mer','Jeu','Ven','Sam']
					}
			    });

	    	//navigation
	    	const url = new URL(document.location)
	    	const urlNav = url.pathname.split("/")
	    	const username = urlNav[1]
			const status = urlNav[2]
			document.addEventListener('DOMContentLoaded', () => {
				document.querySelector("#IBorrowButton").addEventListener("click", Nav.iBorrow)
				document.querySelector("#ILoanButton").addEventListener("click", Nav.iLoan)
				document.querySelector("#profile").href = `/${username}/profile`
			})

		</script>
	</body>
</html>
